.wheel-wrap{
  position:relative; width:min(92vw,340px); aspect-ratio:1/1; border-radius:50%;
  display:grid; place-items:center; overflow:hidden;
  background:
    radial-gradient(closest-side,#0d1223 55%,transparent 56%),
    radial-gradient(circle at 50% 50%,#ffcf3322,#ff6f3c10 40%,transparent 60%),
    radial-gradient(farthest-side,#1a213b,#0c1121 65%,#070b14);
  box-shadow:0 0 0 4px #1b2340, inset 0 0 40px 8px #0007, 0 15px 60px #0009;
  transition:box-shadow .25s ease, transform .25s ease;
}
.rotor{position:absolute; inset:0; display:grid; place-items:center; will-change:transform}
#wheel{width:92%; height:92%; display:block}
.pointer{
  position:absolute; top:-4px; left:50%; transform:translateX(-50%);
  width:0; height:0; border-left:12px solid transparent; border-right:12px solid transparent;
  border-top:18px solid var(--accent); filter:drop-shadow(0 6px 6px #0008);
  transition:filter .25s ease;
}

/* Aktiivse ratta glow */
.wheel-wrap.wheel-active{
  box-shadow:
    0 0 0 4px #1b2340,
    inset 0 0 60px 12px #0009,
    0 24px 90px rgba(0,0,0,.9),
    0 0 42px 6px rgba(255,210,138,.25);
}
.pointer.wheel-active{ filter: drop-shadow(0 10px 10px rgba(255,210,138,.55)); }

/* ── BULBS (parandus: õmblusjooned eemaldatud) ── */
.bulbs{
  position:absolute; inset:8px; /* varem 6px – tõmbame veidi sissepoole */
  margin:0; padding:0; list-style:none; pointer-events:none;
  will-change:transform;
  backface-visibility:hidden;
  -webkit-backface-visibility:hidden;
  transform:translateZ(0);
}
.bulbs li{
  position:absolute; width:10px; height:10px; border-radius:50%;
  /* baasring sama tooniga mis ratta serv – peidab AA seam'i */
  background:#0c1121;
  /* eemaldasime inset-varju – see tekitas musti joonekesi */
  box-shadow:none;
  animation:twinkle 1.4s infinite var(--delay) ease-in-out;
  outline:1px solid transparent; /* Chrome compositing nipp */
}
.bulbs li::after{
  content:"";
  position:absolute; inset:0; border-radius:50%;
  background:radial-gradient(circle at 30% 30%, #fff, #ffd089 55%, #b86b00 80%);
  box-shadow:0 0 12px 3px #ffdc8a55; /* väline glow pseudo-elemendile */
  pointer-events:none;
}

@keyframes twinkle{0%,100%{opacity:.5; transform:scale(.9)} 50%{opacity:1; transform:scale(1.08)}}

.axle{
  position:absolute; width:36%; aspect-ratio:1/1; border-radius:50%;
  background:radial-gradient(closest-side,#251a0f,#000); box-shadow:inset 0 6px 20px #000, 0 4px 30px #000a;
  display:grid; place-items:center;
}
.spin-btn{
  width:86%; aspect-ratio:1/1; border-radius:50%; border:none; cursor:pointer; position:relative;
  color:#3b1300; font-weight:900; letter-spacing:.08em; transition:transform .08s ease, filter .2s ease, opacity .2s ease;
  background:radial-gradient(circle at 30% 30%,#fff 0,#ffd2a1 40%,#ff8c4c 70%,#ff6f3c 100%);
  box-shadow:inset 0 5px 10px #fff7, 0 10px 16px #0008, 0 0 0 6px #2b1e10;
}
.spin-btn:active{transform:scale(.98)}
.spin-btn:disabled{opacity:.55; cursor:not-allowed; filter:saturate(.75)}
.spin-label{font-size:16px}

/* Ratta kanvas – enne aktiveerimist veidi tumedam */
.wheel-wrap #wheel{ transition: filter .25s ease; }
.wheel-wrap:not(.wheel-active) #wheel{ filter: brightness(.72) saturate(.92) contrast(1.06); }
.wheel-wrap.wheel-active #wheel{ filter: none; }


/* Näita kesknuppu ainult siis, kui ratas on aktiveeritud */
.wheel-wrap:not(.wheel-active) .axle .spin-btn {
  opacity: 0;
  pointer-events: none;
  transform: scale(0.96);
  transition: opacity .2s ease, transform .2s ease;
}

.wheel-wrap.wheel-active .axle .spin-btn {
  opacity: 1;
  pointer-events: auto;
  transform: none;
}
/* Kesk-GIF (täidab telje augu, nähtav ainult show-gif režiimis) */
.axle { position: relative; }
.center-gif{
  position:absolute; inset:0;
  width:100%; height:100%; border-radius:50%;
  object-fit:cover;
  opacity:0; pointer-events:none;
  transition:opacity .22s ease;
  z-index:2; /* telje sees, kuid nupu all */
}

/* Võidu järel näita GIF-i */
.wheel-wrap.show-gif .center-gif{ opacity:1; }

/* Kui ratas on taas aktiveeritud (AKTIVEERI vajutatud), peida GIF */
.wheel-wrap.wheel-active .center-gif{ opacity:0; }

/* Kindluse mõttes peida nupp, kui GIF on väljas */
.wheel-wrap.show-gif #spinBtn{
  opacity:0;
  pointer-events:none;
}


/* === KASIINO WIN FX (clean) =========================================== */
:root{ --fx:#ffd28a; }                /* värv muudetakse JS-ist sektorivärviks */

/* Ekraani välk + kaamera shake – overlay kasutab seda endiselt */
.screen-flash{
  position:fixed; inset:0; background:radial-gradient(closest-side, #fff, transparent 65%);
  opacity:0; pointer-events:none; z-index:9999;
}
.screen-flash.flash-in{ animation:screenFlash .28s ease-out forwards; }

.wheel-wrap.shake{ animation:shake .6s cubic-bezier(.19,1,.22,1); }

/* Pirnide stroboskoop + pointeri välk – overlay jätab need alles */
.bulbs.strobe li{ animation-duration:.34s !important; }
.pointer.flash{ filter:drop-shadow(0 0 22px var(--fx)); }

/* Vajalikud keyframe’id, mida overlay/flash kasutab */
@keyframes screenFlash{ 0%{opacity:.9} 100%{opacity:0} }
@keyframes shake{
  0%,100%{ transform:translate3d(0,0,0) }
  15%{ transform:translate3d(1.5px,-1.5px,0) rotate(.2deg) }
  30%{ transform:translate3d(-1px,1.5px,0) rotate(-.2deg) }
  45%{ transform:translate3d(1px,1px,0) }
  60%{ transform:translate3d(-1.5px,-1px,0) }
  75%{ transform:translate3d(.8px,-.8px,0) }
}

/* Motion-sõbralik */
@media (prefers-reduced-motion: reduce){
  .wheel-wrap.shake{ animation:none !important; }
}


/* Sädemeid */
.blast-sparkles{ position:absolute; inset:0; }
.blast-sparkles i{
  position:absolute; width:6px; height:6px; border-radius:50%;
  background: radial-gradient(circle at 30% 30%, #fff, var(--fx) 70%, #b86b00);
  box-shadow:0 0 16px var(--fx);
  opacity:0; transform:translate(-50%,-50%) scale(.6);
}
.blast-sparkles i:nth-child(1){ top:46%; left:52%; }
.blast-sparkles i:nth-child(2){ top:40%; left:60%; }
.blast-sparkles i:nth-child(3){ top:58%; left:40%; }
.blast-sparkles i:nth-child(4){ top:35%; left:45%; }
.blast-sparkles i:nth-child(5){ top:64%; left:56%; }
.blast-sparkles i:nth-child(6){ top:50%; left:66%; }

/* Tekst (jackpot badge) */
.win-blast .blast-text{
  display:flex; align-items:center; gap:12px;
  padding:14px 18px; border-radius:16px;
  background: radial-gradient(120% 180% at 50% 50%, #1a213bcc, #0b0f1acc);
  border:1px solid #ffffff33;
  box-shadow:inset 0 0 0 2px #ffffff10, 0 14px 44px rgba(0,0,0,.7), 0 0 90px var(--fx);
  font-weight:900; letter-spacing:.03em; text-transform:uppercase; color:var(--fx);
  text-shadow:0 0 10px var(--fx), 0 0 30px rgba(255,140,60,.35);
  transform:scale(.86); opacity:0;
}
.win-blast .blast-text .fa-solid{ font-size:22px; }

/* Ekraani välk + kaamera shake */
.screen-flash{
  position:fixed; inset:0; background:radial-gradient(closest-side, #fff, transparent 65%);
  opacity:0; pointer-events:none; z-index:9999;
}
.screen-flash.flash-in{ animation:screenFlash .28s ease-out forwards; }

.wheel-wrap.shake{ animation:shake .6s cubic-bezier(.19,1,.22,1); }

/* Pirnide stroboskoop */
.bulbs.strobe li{ animation-duration:.34s !important; }
.pointer.flash{ filter:drop-shadow(0 0 22px var(--fx)); }

/* Animatsioonid */
@keyframes shock{ 0%{opacity:0; transform:scale(.4)} 25%{opacity:1} 100%{opacity:0; transform:scale(2.6)} }
@keyframes raysIn{ 0%{opacity:0; transform:rotate(0deg) scale(.98)} 100%{opacity:1; transform:rotate(25deg) scale(1)} }
@keyframes raysSpin{ to{ transform:rotate(385deg) } }
@keyframes spark{ 0%{opacity:0; transform:translate(-50%,-50%) scale(.6)}
                  20%{opacity:1} 100%{opacity:0; transform:translate(-50%,-50%) scale(1.8)} }
@keyframes popIn{ 0%{opacity:0; transform:scale(.86) rotate(-2deg)} 60%{opacity:1; transform:scale(1.16) rotate(1deg)} 100%{transform:scale(1)} }
@keyframes fadeSoft{ to{ opacity:0; transform:scale(.95) } }
@keyframes screenFlash{ 0%{opacity:.9} 100%{opacity:0} }
@keyframes shake{
  0%,100%{ transform:translate3d(0,0,0) }
  15%{ transform:translate3d(1.5px,-1.5px,0) rotate(.2deg) }
  30%{ transform:translate3d(-1px,1.5px,0) rotate(-.2deg) }
  45%{ transform:translate3d(1px,1px,0) }
  60%{ transform:translate3d(-1.5px,-1px,0) }
  75%{ transform:translate3d(.8px,-.8px,0) }
}

@keyframes fadeOutSlow {
  from { opacity: 1; transform: scale(1); }
  to   { opacity: 0; transform: scale(.95); }
}

/* 3s järel algatatav pehme hajumine */
.win-blast.fade-after .blast-text {
  animation: fadeOutSlow 1.2s ease forwards;
}

/* (Valikuline) hajuta ka teised kihid samal ajal */
.win-blast.fade-after .blast-rays,
.win-blast.fade-after .blast-shockwave,
.win-blast.fade-after .blast-sparkles i {
  animation: fadeSoft .8s ease forwards;
}


/* Sisse/välja klassid */
.win-blast.is-in .blast-shockwave{ animation:shock .6s ease-out both; }
.win-blast.is-in .blast-rays{ animation:raysIn .35s ease-out forwards, raysSpin 1.8s linear .35s infinite; }
.win-blast.is-in .blast-text{ animation:popIn .55s cubic-bezier(.2,1.15,.2,1) forwards; }
.win-blast.is-in .blast-sparkles i{ animation:spark .9s ease-out both; }

.win-blast.is-out .blast-text{ animation:fadeSoft .32s ease forwards; }
.win-blast.is-out .blast-rays{ animation:fadeSoft .32s ease forwards; }
.win-blast.is-out .blast-shockwave{ animation:fadeSoft .32s ease forwards; }
.win-blast.is-out .blast-sparkles i{ animation:fadeSoft .32s ease forwards; }

/* Motion-sõbralik */
@media (prefers-reduced-motion: reduce){
  .wheel-wrap.shake, .blast-rays{ animation:none !important; }
}


